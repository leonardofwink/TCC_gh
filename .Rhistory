size = 17),
axis.title.x =
element_text(
color = "black",
size = 15,
angle = 0,),
# element_blank(),
axis.title.y = element_text(
color = "black",
size = 15,
angle = 90),
axis.text.x = element_text(
color = "black",
size = 13,
angle = 0),
axis.text.y = element_text(
color = "black",
size = 15,
angle = 0),
strip.background = element_rect(fill = "white",
linetype = 1,
size = 0.5,
color = "black"),
strip.text = element_text(size = 14),
# panel.background = element_rect(fill = "white"),
panel.spacing.x = unit(1, "lines"),
plot.margin = margin(l = 5, r = 10,
b = 5, t = 5)
)
}
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")
dados %>%
dplyr::filter(
periodo == "1990-2000" |
periodo == "2000-2010" |
periodo == "2010-2020"
) %>%
dplyr::select(ponto_monitoramento, condutividade, data_coleta, periodo) %>%
ggplot2::ggplot(
data = .,
aes(
x = {{eixo_x}},
y = {{eixo_y}}
)
)+
annotate("rect",
xmin = periodo_inicial, xmax = periodo_final,
ymin = 500, ymax = Inf,
alpha = 1,
fill="#eb5661")+ #classe 4
annotate("rect",
xmin = periodo_inicial, xmax = periodo_final,
ymin = 0, ymax = 500,
alpha = 1,
fill="#8dcdeb")+ #classe 1
labs(title = titulo,
x=NULL,
y="µmhos/cm")+
geom_vline(
xintercept = as.Date(c("2010-01-01", "2000-01-01"), "%Y-%m-%d"),
color = "grey25",
linetype = "dashed",
)+
geom_line(
linewidth = 0.05,
linetype = 9,
# aes(color = codigo),
na.rm = TRUE
)+
geom_point(
size = 1,
# aes(color = codigo),
na.rm = TRUE
)+
scale_x_date(
limits = as.Date(c(
"1990-01-01",
"2021-01-01"
# NA #pode usar NA também
)),
expand = c(0.0, 0.0),
date_breaks = "5 years",
minor_breaks = "1 year",
date_labels = "%Y",
)+
facet_wrap(
~ponto_monitoramento,
nrow = 4,
)+
theme_bw()+
theme(
plot.title =
element_text(
hjust = 0.5,
color = "black",
size = 17),
axis.title.x =
element_text(
color = "black",
size = 15,
angle = 0,),
# element_blank(),
axis.title.y = element_text(
color = "black",
size = 15,
angle = 90),
axis.text.x = element_text(
color = "black",
size = 13,
angle = 0),
axis.text.y = element_text(
color = "black",
size = 15,
angle = 0),
strip.background = element_rect(fill = "white",
linetype = 1,
size = 0.5,
color = "black"),
strip.text = element_text(size = 14),
# panel.background = element_rect(fill = "white"),
panel.spacing.x = unit(1, "lines"),
plot.margin = margin(l = 5, r = 10,
b = 5, t = 5)
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")
?geom_smooth()
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth()
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
# fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "loess",
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "loess",
span = 0.2
fullrange = TRUE,
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "loess",
span = 0.2,
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "loess",
span = 0.3,
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "loess",
span = 1,
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")+
geom_smooth(
method = "lm",
# span = 1,
fullrange = TRUE,
)
ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")
(condutividade_overview <- ts_condutividade()+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.05)),
# n.breaks = 8,
limits = c(
# min(plan_wide_19902020$condutividade, na.rm = TRUE),
5,
1000
# max(plan_wide_19902020$condutividade, na.rm = TRUE)
),
breaks = c(10, 50, 100, 500, 1000),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "),
trans = "log10")
)
ts_ecoli()+
geom_vline(
xintercept = as.Date(c("2007-01-01"), "%Y-%m-%d"),
color = "red",
linetype = "dashed",
)+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
ts_ecoli()+
geom_vline(
xintercept = as.Date(c("2007-01-01", "2008-01-01"), "%Y-%m-%d"),
color = "red",
linetype = "dashed",
)+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
ts_ecoli()+
geom_vline(
xintercept = as.Date(c("2003-01-01", "2008-01-01"), "%Y-%m-%d"),
color = "red",
linetype = "dashed",
)+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
ts_ecoli()+
geom_vline(
xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
color = "red",
linetype = "dashed",
)+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
ts_ecoli()+
geom_vline(
xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
color = "red",
linetype = "dashed",
)+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)+
geom_smooth(
method = "lm"
)
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)+
geom_smooth(
method = "lm",
se = FALSE,
linewidth = 0.2
)
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)+
geom_smooth(
method = "lm",
se = FALSE,
linewidth = 0.5,
)
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)+
geom_smooth(
method = "lm",
se = FALSE,
linewidth = 0.7,
)
)
(ecoli_overview <- ts_ecoli()+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)
)
(ecoli_overview <- ts_ecoli()+
# geom_vline(
#    xintercept = as.Date(c("2002-01-01", "2003-01-01"), "%Y-%m-%d"),
#    color = "red",
#    linetype = "dashed",
# )+
scale_y_log10(
breaks = trans_breaks("log10", function(x) 10^x),
labels = trans_format("log10", math_format(10^.x)),
expand = expansion(mult = c(0.05, 0.25)),
n.breaks = 9,
)+
geom_smooth(
method = "lm",
se = FALSE,
linewidth = 0.7,
)
)
ecoli
