pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
# pacman::p_load(tibbletime)
# cite_packages()
boxplot_pH <- function(dados = plan_wide_19902020, eixo_x = codigo, eixo_y = pH, titulo = "pH"){
ggplot2::ggplot(
data = dados,
aes(
x = {{eixo_x}},
y = {{eixo_y}}
)
)+
annotate("rect",
xmin = -Inf, xmax = Inf,
ymin = -Inf, ymax = 6,
alpha = 1,
fill="#eb5661")+ #classe 4
annotate("rect",
xmin = -Inf, xmax = Inf,
ymin = 9, ymax = Inf,
alpha = 1,
fill="#eb5661")+ #classe 4
annotate("rect",
xmin = -Inf, xmax = Inf,
ymin = 6, ymax = 9,
alpha = 1,
fill="#8dcdeb")+ #classe 1
stat_summary(
fun.data = f,
geom = 'errorbar',
width = 0.3,
position = position_dodge(width = 0.65),
)+
stat_summary(
fun.data = f,
geom = "boxplot",
width = 0.7,
fill = '#F8F8FF',
color = "black",
outlier.shape = NA, #se deixar NA fica só o jitter, se não, deixa 1
)+
labs(
title = titulo,
x= NULL,
y="mg/L"
)+
ggbeeswarm::geom_quasirandom(
size = 1.2,
alpha = .25,
width = .07,
)+
scale_y_continuous(expand = expansion(mult = c(0.01, 0.01)),
n.breaks = 8,
limits = c(4,11),
labels = scales::number_format(accuracy = 1,
decimal.mark = ",",
big.mark = " "))+
scale_x_discrete(limits = c("87398500",
"87398980",
"87398900",
"87398950",
"87405500",
"87406900",
"87409900"),
labels = c("PM1", "PM2", "PM3", "PM4", "PM5", "PM6", "PM7")
)+
geom_smooth(
method = "lm",
se=FALSE, #se deixar TRUE gera o intervalo de confiança de 95%
aes(group = 1),
alpha = .5,
na.rm = TRUE,
size = 1
)+
theme_grafs()
}
(pH <- boxplot_pH(
titulo = "pH no período 1990-2020"
)+
facet_wrap(~periodo)
)
library(
c(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
)
pacotes <-
c(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
plan_wide_19902020 %>% skimr::skim()
R_LIBS_SITE="E:\\Documents\\R\\R-4.2.2\\library"
R_LIBS_SITE="E:\\Documents\\R\\R-4.2.2\\library"
pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
skimr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
skimr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary
)
plan_wide_19902020 %>% skimr::skim()
plan_wide_19902020 %>% skimr::skim()
plan_wide_19902020 %>% skimr::skim()
skim_plan <- plan_wide_19902020 %>% skimr::skim()
skim_plan <- plan_wide_19902020 %>% skimr::skim() %>% arrange(complete_rate)
skim_plan <- plan_wide_19902020 %>% skimr::skim() %>% arrange(desc(complete_rate))
skim_plan
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% skimr::skim() %>% arrange(desc(complete_rate))
skim_plan
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade) %>% skimr::skim() %>% arrange(desc(complete_rate))
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(complete_rate))
skim_plan
?skim()
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(skim_variable, periodo, complete_rate))
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(c(skim_variable, periodo, complete_rate)))
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(c((skim_variable), periodo, complete_rate)))
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(periodo))
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(periodo))
skim_plan
skim_plan <- plan_wide_19902020 %>% group_by(periodo) %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(periodo)
skim_plan
plan_wide_19902020 %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(periodo)
plan_wide_19902020 %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim()
plan_wide_19902020 %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(complete_rate)
plan_wide_19902020 %>% select(oxigenio_dissolvido, dbo, fosforo_total, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(complete_rate))
plan_wide_19902020 %>% select(oxigenio_dissolvido, dbo, fosforo_total, solidos_totais, escherichia_coli, nitrogenio_amoniacal, temperatura_agua, turbidez, pH, condutividade, periodo) %>% skimr::skim() %>% arrange(desc(complete_rate))
eda_all_time <- plan_wide_19902020 %>%
select(
oxigenio_dissolvido,
dbo,
fosforo_total,
solidos_totais,
escherichia_coli,
nitrogenio_amoniacal,
temperatura_agua,
turbidez,
pH,
condutividade,
periodo
) %>%
skimr::skim() %>%
arrange(
desc(complete_rate)
)
eda_all_time
eda_all_time$skim_type
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal")
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[1]
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[2]
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[3]
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[3] %>% pluck()
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[3] %>% pluck(1)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% round(pluck(1)*100, 2)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100 %>% round(digits = 2)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100 %>% round(digits = 3)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100 %>% round(digits = 1)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100
eda_all_time
eda_all_time
eda_all_time
library(tidyverse)
eda_all_time <- plan_wide_19902020 %>%
select(
oxigenio_dissolvido,
dbo,
fosforo_total,
solidos_totais,
escherichia_coli,
nitrogenio_amoniacal,
temperatura_agua,
turbidez,
pH,
condutividade,
periodo
) %>%
skimr::skim() %>%
arrange(
desc(complete_rate)
)
`r eda_all_time %>% filter(skim_variable == "temperatura_agua") %>% .[4] %>% pluck(1)*100`
skim_plan
eda_all_time
eda_all_time %>% select(-hist)
eda_all_time %>% select(-numeric.hist)
plan_wide_19902020 %>% group_by(periodo) %>% skim() %>% select(-numeric.hist)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
oxigenio_dissolvido,
dbo,
fosforo_total,
solidos_totais,
escherichia_coli,
nitrogenio_amoniacal,
temperatura_agua,
turbidez,
pH,
condutividade,
periodo
) %>%
skim() %>%
select(-numeric.hist)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
oxigenio_dissolvido,
dbo,
fosforo_total,
solidos_totais,
escherichia_coli,
nitrogenio_amoniacal,
temperatura_agua,
turbidez,
pH,
condutividade,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>%
filter(
skim_variable == "turbidez"
)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
oxigenio_dissolvido,
dbo,
fosforo_total,
solidos_totais,
escherichia_coli,
nitrogenio_amoniacal,
temperatura_agua,
turbidez,
pH,
condutividade,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>%
filter(
skim_variable == "turbidez"
)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[3]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[4]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[5]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[6]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist)
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[6]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[1,6]
plan_wide_19902020 %>%
group_by(periodo) %>%
select(
turbidez,
periodo
) %>%
skim() %>%
select(-numeric.hist) %>% .[1,6] %>% pluck(1)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1) %>% format(round(2), nsmall = 2)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1) %>% formatC(digits = 2)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1) %>% formatC(digits = 4)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1) %>% formatC(digits = 4, format = "f")
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[2,6] %>% pluck(1) %>% formatC(digits = 3, format = "f")
pacman::p_load(
# ETL/data wrangling
readr, readxl, janitor,
tidyverse,
dplyr,
skimr,
# pillar,
# see,
#modelsummary,
# report,
# Data Viz
rmarkdown,
knitr,
## Gráficos
ggplot2,
GGally,
ggtext,
ggbeeswarm,
gridExtra,
cowplot,
## Tabelas
kableExtra,
gtsummary,
formattable
)
?formattable()
formattable()
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)*100
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1)
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1) %>% formattable(digits = 3)
formattable::percent()
eda_all_time %>% filter(skim_variable == "nitrogenio_amoniacal") %>% .[4] %>% pluck(1) %>% percent()
eda_all_time %>% filter(skim_variable == "temperatura_agua") %>% .[3] %>% pluck(1)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[1,6] %>% pluck(1)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[1,6] %>% pluck(1) %>% formattable(digits = 3)
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[1,6] %>% pluck(1) %>% formattable(digits = 3, format = "f")
formattable()
?formattable()
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[1,6] %>% pluck(1) %>% sprintf(fmt = "%#,3f")
plan_wide_19902020 %>% group_by(periodo) %>% select(turbidez, periodo) %>% skim() %>% select(-numeric.hist) %>% .[1,6] %>% pluck(1) %>% sprintf(fmt = "%#.3f")
